/*!
 * angular-masonry 0.1.0
 * Pascal Hartig, weluse GmbH, http://weluse.de/
 * License: MIT
 */
!function(){"use strict";angular.module("wu.masonry",[]).controller("MasonryCtrl",function(a,b,c){function d(){f||(f=!0,c(function(){f=!1,b.masonry("layout")},0))}var e={},f=!1;this.appendBrick=function(a,f,g){function h(){0===Object.keys(e).length&&c(function(){b.masonry("resize")}),a.addClass("loaded"),void 0===e[f]&&(e[f]=!0,b.masonry("appended",a,!0),d())}g?a.imagesLoaded(h):h()},this.removeBrick=function(a,c){delete e[a],b.masonry("remove",c),d()}}).directive("masonry",function(){return{restrict:"AE",controller:"MasonryCtrl",link:function(a,b,c){var d=c.itemSelector||".masonry-brick";b.masonry({itemSelector:d})}}}).directive("masonryBrick",function(){return{restrict:"AC",require:"^masonry",link:function(a,b,c,d){var e=a.$id;d.appendBrick(b,e,!0),a.$on("$destroy",function(){d.removeBrick(e,b)})}}})}();