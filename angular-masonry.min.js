/*!
 * angular-masonry 0.2.1
 * Pascal Hartig, weluse GmbH, http://weluse.de/
 * License: MIT
 */
!function(){"use strict";angular.module("wu.masonry",[]).controller("MasonryCtrl",function(a,b,c){function d(){var a=arguments,b=h.filter(function(b){return b[0]===a[0]}).length>0;b||e.apply(null,arguments)}function e(){j&&c.cancel(j),h.push([].slice.call(arguments)),j=c(function(){i||(h.forEach(function(a){b.masonry.apply(b,a)}),h=[])},30)}function f(a){a.addClass("loaded")}var g={},h=[],i=!1,j=null;this.appendBrick=function(a,c){function e(){0===Object.keys(g).length&&b.masonry("resize"),void 0===g[c]&&(f(a),g[c]=!0,b.masonry("appended",a,!0),d("layout"))}i||a.imagesLoaded(e)},this.removeBrick=function(a,c){i||(delete g[a],b.masonry("remove",c),d("layout"))},this.destroy=function(){i=!0,b.data("masonry")&&b.masonry("destroy"),g=[]}}).directive("masonry",function(){return{restrict:"AE",controller:"MasonryCtrl",link:function(a,b,c,d){var e=a.$eval(c.options),f=angular.extend(e||{},{itemSelector:c.itemSelector||".masonry-brick",columnWidth:c.columnWidth});b.masonry(f),a.$on("$destroy",d.destroy)}}}).directive("masonryBrick",function(){return{restrict:"AC",require:"^masonry",link:function(a,b,c,d){var e=a.$id;d.appendBrick(b,e),b.on("$destroy",function(){d.removeBrick(e,b)})}}})}();