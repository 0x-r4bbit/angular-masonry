/*!
 * angular-masonry 0.0.0
 * Pascal Hartig, weluse GmbH, http://weluse.de/
 * License: MIT
 */
!function(){"use strict";angular.module("wu.masonry",[]).directive("masonry",function(a){return{restrict:"AE",link:function(a,b,c){var d=c.itemSelector||".masonry-brick";b.masonry({itemSelector:d})},controller:function(b,c){function d(){f||(f=!0,a(function(){f=!1,c.masonry("layout")},0))}var e={},f=!1;this.appendBrick=function(b,f,g){function h(){0===Object.keys(e).length&&a(function(){c.masonry("resize")}),b.addClass("loaded"),void 0===e[f]&&(e[f]=!0,c.masonry("appended",b,!0),d())}g?b.imagesLoaded(h):h()},this.removeBrick=function(a,b){delete e[a],c.masonry("remove",b),d()}}}}).directive("masonryBrick",function(){return{restrict:"AC",require:"^masonry",link:function(a,b,c,d){var e=a.$id;d.appendBrick(b,e,!0),a.$on("$destroy",function(){d.removeBrick(e,b)})}}})}();